@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Vintage Design System CSS Variables */
:root {
  --color-cream: #FAF9F7;
  --color-paper: #F5F1E8;
  --color-stone: #E8E4DC;
  --color-text-muted: #6B6560;
  --color-text-secondary: #8C8680;
  --color-border-soft: #E0DCD4;
  --color-warm: #D4C4B0;

  /* Theme tokens (light mode) */
  --bg: #FAF9F7;
  --bg-2: #F5F1E8;
  --surface: #FFFFFF;
  --surface-2: #E8E4DC;
  --divider: #E0DCD4;
  --border: #E0DCD4;
  --text: #2D2A26;
  --text-2: #6B6560;
  --text-3: #8C8680;
  --brand: #D4C4B0;
  --brand-2: #B89A6A;
  --link: #4A4540;
  --sale-red: #DC2626;
  --success: #58B89A;
  --warning: #E0B45A;
  --focus-ring: rgba(210, 180, 140, 0.45);
  --input-fill: #F5F1E8;

  --font-editorial: 'Cormorant Garamond', Georgia, serif;
  --font-body: 'Inter', system-ui, sans-serif;
}

/* Dark mode palette – deep ink navy + warm ivory */
[data-theme='dark'] {
  --bg: #0F141B;
  --bg-2: #121A24;
  --surface: #151F2B;
  --surface-2: #1A2634;
  --divider: #263445;
  --border: #2D3A4B;
  --text: #F3EBDD;
  --text-2: #C9C1B5;
  --text-3: #9A958D;
  --brand: #D2B48C;
  --brand-2: #B89A6A;
  --link: #E6D7BE;
  --sale-red: #E05A5A;
  --success: #58B89A;
  --warning: #E0B45A;
  --focus-ring: rgba(210, 180, 140, 0.45);
  --input-fill: #101824;

  /* Remap vintage vars so existing components follow dark theme */
  --color-cream: var(--bg);
  --color-paper: var(--bg-2);
  --color-stone: var(--surface);
  --color-text-muted: var(--text-2);
  --color-text-secondary: var(--text-2);
  --color-border-soft: var(--divider);
  --color-warm: var(--brand);
}

@layer base {
  * {
    border-color: var(--border);
  }

  html {
    overflow-x: hidden;
  }

  body {
    background-color: var(--bg);
    color: var(--text);
    @apply antialiased;
    overflow-x: hidden;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold;
  }

  /* Custom scrollbar – theme-aware */
  ::-webkit-scrollbar {
    @apply w-2;
  }

  ::-webkit-scrollbar-track {
    background-color: var(--surface-2);
  }

  ::-webkit-scrollbar-thumb {
    background-color: var(--divider);
    @apply rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--border);
  }
}

@layer components {
  /* Depop-inspired hover effects */
  .hover-lift {
    @apply transition-transform duration-200 hover:-translate-y-1;
  }

  .hover-scale {
    @apply transition-transform duration-300 hover:scale-105;
  }

  /* Hero collection card overlay (Collections, New Arrivals, Vintage) */
  .hero-card-overlay {
    @apply absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent;
  }

  /* Card styles */
  .card {
    background-color: var(--surface);
    @apply rounded-lg border p-4;
    border-color: var(--border);
  }

  .card-elevated {
    background-color: var(--surface);
    @apply rounded-lg shadow-lg p-4;
  }

  /* Button variants matching Depop */
  .btn-primary {
    @apply bg-black text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors;
  }

  .btn-secondary {
    @apply bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors;
  }

  .btn-outline {
    @apply border-2 border-black text-black px-6 py-3 rounded-lg font-medium hover:bg-black hover:text-white transition-all;
  }

  /* Input styles */
  .input-field {
    @apply w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black focus:border-black transition-all;
  }

  /* Badge styles */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium;
  }

  .badge-primary {
    @apply bg-black text-white;
  }

  .badge-secondary {
    @apply bg-gray-100 text-gray-900;
  }

  /* Grid layouts */
  .product-grid {
    @apply grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6;
  }

  /* Loading skeleton */
  .skeleton {
    @apply animate-pulse bg-gray-200 rounded;
  }

  /* ========================================
     VINTAGE MARKETPLACE DESIGN SYSTEM
     ======================================== */

  /* Vintage Card - Editorial thrift magazine style */
  .vintage-card {
    background-color: var(--surface);
    @apply rounded-vintage overflow-hidden;
    border: 1px solid var(--border);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04), 0 2px 8px rgba(0, 0, 0, 0.02);
    transition: box-shadow 0.3s ease, transform 0.3s ease;
  }

  .vintage-card:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06), 0 8px 24px rgba(0, 0, 0, 0.04);
    transform: translateY(-2px);
  }

  /* Vintage Button - Muted, editorial feel */
  .btn-vintage {
    @apply px-5 py-2.5 rounded-vintage font-medium text-sm transition-all duration-200;
    background-color: var(--color-stone);
    color: var(--color-text-muted);
  }

  .btn-vintage:hover {
    background-color: var(--brand);
    color: var(--text);
  }

  .btn-vintage-primary {
    @apply px-5 py-2.5 rounded-vintage font-medium text-sm bg-black text-white transition-all duration-200;
  }

  .btn-vintage-primary:hover {
    @apply bg-gray-800;
  }

  /* Vintage Input */
  .input-vintage {
    @apply w-full px-4 py-2.5 rounded-vintage text-sm transition-all duration-200;
    background-color: var(--input-fill);
    border: 1px solid var(--border);
    color: var(--text);
  }

  .input-vintage:focus {
    outline: none;
    border-color: var(--brand);
    box-shadow: 0 0 0 3px var(--focus-ring);
  }

  /* Vintage Badge - Subtle trust indicators */
  .badge-vintage {
    @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium;
    background-color: var(--color-stone);
    color: var(--color-text-muted);
  }

  .badge-vintage-success {
    @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium;
    background-color: rgba(88, 184, 154, 0.2);
    color: var(--success);
  }

  /* Vintage Section Header */
  .section-header-vintage {
    @apply font-editorial text-2xl md:text-3xl font-medium tracking-tight;
    color: var(--text);
  }

  /* Preview Column - Hidden on mobile, visible on desktop */
  .preview-column {
    display: none;
  }

  @media (min-width: 1024px) {
    .preview-column {
      display: block;
    }
  }

  /* Vintage Subheader */
  .subheader-vintage {
    @apply text-xs uppercase tracking-[0.2em] font-medium;
    color: var(--color-text-secondary);
  }

  /* Vintage Divider */
  .divider-vintage {
    @apply w-full h-px;
    background-color: var(--color-border-soft);
  }

  /* Marketplace Background */
  .bg-marketplace {
    background-color: var(--color-cream);
  }

  /* Vintage Filter Section */
  .filter-section-vintage {
    @apply py-4 border-b;
    border-color: var(--color-border-soft);
  }

  .filter-section-vintage:last-child {
    @apply border-b-0;
  }

  .filter-label-vintage {
    @apply text-sm font-medium mb-3 block;
    color: var(--text);
  }

  /* Vintage Checkbox */
  .checkbox-vintage {
    @apply w-4 h-4 rounded border transition-colors cursor-pointer;
    border-color: var(--color-border-soft);
    background-color: var(--color-cream);
  }

  .checkbox-vintage:checked {
    background-color: var(--text);
    border-color: var(--text);
  }

  /* Vintage Select */
  .select-vintage {
    @apply w-full px-3 py-2 rounded-vintage text-sm appearance-none cursor-pointer transition-all;
    background-color: var(--input-fill);
    border: 1px solid var(--border);
    color: var(--text);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236B6560' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }

  .select-vintage:focus {
    outline: none;
    border-color: var(--brand);
  }

  /* Vintage Tabs */
  .tab-vintage {
    @apply relative px-4 py-2 text-sm font-medium transition-all duration-200 rounded-full;
    color: var(--color-text-secondary);
  }

  .tab-vintage:hover {
    color: var(--color-text-muted);
    background-color: var(--color-stone);
  }

  .tab-vintage-active {
    @apply relative px-4 py-2 text-sm font-medium rounded-full;
    background-color: var(--text);
    color: var(--bg);
  }

  /* Quick View Overlay */
  .quick-view-overlay {
    @apply absolute inset-0 backdrop-blur-sm opacity-0 invisible transition-all duration-200;
    background-color: color-mix(in srgb, var(--surface) 95%, transparent);
  }

  .vintage-card:hover .quick-view-overlay {
    @apply opacity-100 visible;
  }

  /* Save/Bookmark Button */
  .save-btn-vintage {
    @apply w-8 h-8 rounded-full flex items-center justify-center transition-all duration-200;
    background-color: rgba(255, 255, 255, 0.9);
  }

  .save-btn-vintage:hover {
    background-color: var(--surface);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .save-btn-vintage.saved {
    color: var(--sale-red);
  }

  /* Recently Viewed Row */
  .recently-viewed-item {
    @apply flex-shrink-0 w-20 h-20 rounded-vintage overflow-hidden;
    background-color: var(--surface-2);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
  }

  /* Trending Module */
  .trending-module {
    @apply p-4 rounded-vintage;
    background-color: var(--surface-2);
    border: 1px solid var(--border);
  }

  /* Empty State Vintage */
  .empty-state-vintage {
    @apply text-center py-16 px-4;
  }

  .empty-state-vintage h3 {
    @apply font-editorial text-xl md:text-2xl font-medium mb-2;
    color: var(--text);
  }

  .empty-state-vintage p {
    @apply text-sm max-w-sm mx-auto mb-6;
    color: var(--text-2);
  }

  /* Loading skeleton vintage */
  .skeleton-vintage {
    @apply animate-pulse rounded-vintage;
    background: linear-gradient(90deg, var(--color-stone) 25%, var(--color-paper) 50%, var(--color-stone) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* Scroll hint peek – breathing motion */
  @keyframes scroll-hint-breathe {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(4px) scale(1.03); }
  }
  @keyframes scroll-hint-shimmer-pass {
    0% { opacity: 1; }
    50% { opacity: 0.6; }
    100% { opacity: 1; }
  }
  .scroll-hint-breathe {
    animation: scroll-hint-breathe 3.2s ease-in-out infinite;
  }
  .scroll-hint-shimmer {
    animation: scroll-hint-shimmer-pass 0.8s ease-in-out;
  }

  /* Scroll hint cue – ambient UI (no bounce): breathing + gentle drift + subtle opacity */
  @keyframes scroll-hint-cue-float {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(4px) scale(1.04); }
  }
  @keyframes scroll-hint-cue-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.85; }
  }
  .scroll-hint-cue-media.animated {
    animation:
      scroll-hint-cue-float 4s ease-in-out infinite,
      scroll-hint-cue-pulse 3s ease-in-out infinite;
  }
  @media (prefers-reduced-motion: reduce) {
    .scroll-hint-cue-media.animated {
      animation: none;
    }
  }
}

@layer utilities {
  /* Text utilities */
  .text-balance {
    text-wrap: balance;
  }

  /* Scrollbar hide */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Aspect ratio helpers */
  .aspect-product {
    aspect-ratio: 3/4;
  }

  /* Gradient backgrounds matching Depop style */
  .gradient-primary {
    @apply bg-gradient-to-br from-gray-50 to-gray-100;
  }

  .gradient-dark {
    @apply bg-gradient-to-br from-gray-900 to-black;
  }

  /* Focus states */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2;
  }

  /* Animations */
  .animate-in {
    animation: fadeIn 0.3s ease-in-out;
  }

  .slide-in-right {
    animation: slideInRight 0.3s ease-out;
  }

  /* ========================================
     VINTAGE UTILITIES
     ======================================== */

  /* Vintage image filter - subtle warm tone */
  .filter-vintage {
    filter: saturate(0.9) contrast(0.95) brightness(1.02) sepia(0.05);
  }

  /* Vintage image filter - stronger for hero images */
  .filter-vintage-strong {
    filter: saturate(0.85) contrast(0.92) brightness(1.02) sepia(0.08);
  }

  /* Vintage text colors */
  .text-vintage-primary {
    color: var(--text);
  }

  .text-vintage-muted {
    color: var(--color-text-muted);
  }

  .text-vintage-secondary {
    color: var(--color-text-secondary);
  }

  /* Vintage backgrounds */
  .bg-vintage-cream {
    background-color: var(--color-cream);
  }

  .bg-vintage-paper {
    background-color: var(--color-paper);
  }

  .bg-vintage-stone {
    background-color: var(--color-stone);
  }

  .bg-vintage-primary {
    background-color: var(--text);
  }

  /* Vintage borders */
  .border-vintage {
    border-color: var(--color-border-soft);
  }

  .border-vintage-border {
    border-color: var(--color-border-soft);
  }

  .border-vintage-primary {
    border-color: var(--text);
  }

  /* Vintage decoration (for underlines) */
  .decoration-vintage-border {
    text-decoration-color: var(--color-border-soft);
  }

  /* Editorial font utility */
  .font-editorial {
    font-family: var(--font-editorial);
  }

  /* Sticky controls bar */
  .sticky-controls {
    @apply sticky z-30 backdrop-blur-sm;
    top: 64px; /* Height of navbar */
    background-color: color-mix(in srgb, var(--bg) 95%, transparent);
  }

  /* Film grain texture - lighter version */
  .film-grain-light {
    @apply absolute inset-0 pointer-events-none;
    background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="2" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)" opacity="0.04"/></svg>');
    opacity: 0.15;
    mix-blend-mode: overlay;
  }

  /* Horizontal scroll container */
  .scroll-x-vintage {
    @apply flex gap-3 overflow-x-auto pb-2 scrollbar-hide;
    scroll-snap-type: x mandatory;
  }

  .scroll-x-vintage > * {
    scroll-snap-align: start;
  }

  /* Price display */
  .price-vintage {
    @apply font-semibold text-base;
    color: var(--text);
  }

  /* Subtle hover effect for links */
  .link-vintage {
    @apply transition-colors duration-200;
    color: var(--color-text-muted);
  }

  .link-vintage:hover {
    color: var(--text);
  }
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

/* Image loading optimization */
img[loading='lazy'] {
  @apply opacity-0 transition-opacity duration-300;
}

img[loading='lazy'].loaded {
  @apply opacity-100;
}

/* Vintage Magazine Collage Styles */
.vintage-photo {
  @apply relative cursor-pointer;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.vintage-photo:hover {
  z-index: 10;
}

.photo-border {
  @apply relative w-full h-full rounded-sm overflow-visible;
  background: var(--bg-2);
  padding: 8px;
  box-shadow: 
    0 2px 4px rgba(0, 0, 0, 0.06),
    0 4px 8px rgba(0, 0, 0, 0.04),
    0 8px 16px rgba(0, 0, 0, 0.03);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.vintage-photo:hover .photo-border {
  box-shadow: 
    0 4px 8px rgba(0, 0, 0, 0.08),
    0 8px 16px rgba(0, 0, 0, 0.06),
    0 16px 32px rgba(0, 0, 0, 0.05);
}

/* Vintage color grading - reduced saturation, warm tones, soft contrast */
.vintage-image {
  filter: saturate(0.85) contrast(0.92) brightness(1.02) sepia(0.08);
}

/* Film grain texture overlay */
.film-grain {
  @apply absolute inset-0 pointer-events-none;
  background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="2.5" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)" opacity="0.08"/></svg>');
  opacity: 0.25;
  mix-blend-mode: overlay;
}

/* Mobile-first responsive utilities */
@media (max-width: 640px) {
  .mobile-full-width {
    @apply w-screen relative left-1/2 right-1/2 -mx-[50vw];
  }
}

/* Print styles */
@media print {
  .no-print {
    @apply hidden;
  }
}

